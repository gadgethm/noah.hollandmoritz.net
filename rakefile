GH_PAGES_DIR = "gadgethm.github.io"

desc "Build Jekyll site and copy files"
task :build do
  ENV["JEKYLL_ENV"] = "production"
  system "bundle exec jekyll build"
  system "mkdir ./../temp"
  system "cp -r ./_site/* ./../temp && rm -r ./_site/ ./.sass-cache"
  system "git checkout gh-pages && git rm -r * && cd ./../ && cp -r ./temp/* ./#{GH_PAGES_DIR}/ && rm -r ./temp/ && cd ./#{GH_PAGES_DIR} && git add --all"
end

desc "Build Jekyll site, then launch local test page in firefox"
task :test do
  ENV["JEKYLL_ENV"] = "development"
  system "bundle exec jekyll serve"
end

desc "Update Gems and plugins"
task :update do
  system "bundle update"
  system "bundle install"
end
